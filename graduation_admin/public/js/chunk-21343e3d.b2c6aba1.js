(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21343e3d"],{"11e9":function(t,e,a){var r=a("52a7"),l=a("4630"),o=a("6821"),n=a("6a99"),s=a("69a8"),i=a("c69a"),c=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?c:function(t,e){if(t=o(t),e=n(e,!0),i)try{return c(t,e)}catch(a){}if(s(t,e))return l(!r.f.call(t,e),t[e])}},"5dbc":function(t,e,a){var r=a("d3f4"),l=a("8b97").set;t.exports=function(t,e,a){var o,n=e.constructor;return n!==a&&"function"==typeof n&&(o=n.prototype)!==a.prototype&&r(o)&&l&&l(t,o),t}},"82d4":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{separator:"/",width:"100%"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("管理员管理")]),a("el-breadcrumb-item",[t._v("立项管理")])],1),a("el-divider"),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"项目分配",name:"first"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableRowClassName,"header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("span",[t._v(t._s(e.row.name))])]),a("el-form-item",{attrs:{label:"项目类别"}},[a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.row.type))])],1),a("el-form-item",{attrs:{label:"项目负责人"}},[a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.row.realname))])],1),a("el-form-item",{attrs:{label:"审核状态"}},[1===e.row.states?a("el-button",{attrs:{type:"text"}},[t._v("审核通过")]):t._e(),2===e.row.states?a("el-button",{attrs:{type:"text"}},[t._v("审核失败")]):t._e(),3===e.row.states?a("el-button",{attrs:{type:"text"}},[t._v("未审核")]):t._e()],1),a("el-form-item",{attrs:{label:"项目成员"}},t._l(e.row.member,(function(e){return a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.realname)+"\n                                ")])})),1),a("el-form-item",{attrs:{label:"项目关键词"}},[a("span",[t._v(t._s(e.row.keywords))])]),a("el-form-item",{attrs:{label:"项目类型"}},[1===e.row.level?a("el-button",{attrs:{type:"text"}},[t._v("重点项目")]):t._e(),2===e.row.level?a("el-button",{attrs:{type:"text"}},[t._v("一般项目")]):t._e(),3===e.row.level?a("el-button",{attrs:{type:"text"}},[t._v("小额")]):t._e()],1),a("el-form-item",{attrs:{label:"项目描述"}},[a("span",[t._v(t._s(e.row.description))])]),a("el-form-item",{attrs:{label:"项目申请时间"}},[a("span",[t._v(t._s(e.row.time))])]),a("el-form-item",{attrs:{label:"项目在评专家"}},t._l(e.row.research_experts,(function(e){return a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.realname)+"\n                                ")])})),1),a("el-form-item",{attrs:{label:"项目材料"}},[a("span")])],1)]}}])}),a("el-table-column",{attrs:{prop:"project_number",label:"项目编号",width:"200"}}),a("el-table-column",{attrs:{prop:"realname",label:"负责人姓名",width:"100"}}),a("el-table-column",{attrs:{prop:"college",label:"所属学院",width:"160"}}),a("el-table-column",{attrs:{prop:"teachers_title",label:"职称",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.teachers_title?a("el-button",{attrs:{type:"text"}},[t._v("助教")]):t._e(),2===e.row.teachers_title?a("el-button",{attrs:{type:"text"}},[t._v("讲师")]):t._e(),3===e.row.teachers_title?a("el-button",{attrs:{type:"text"}},[t._v("副教授")]):t._e(),4===e.row.teachers_title?a("el-button",{attrs:{type:"text"}},[t._v("教授")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"degree",label:"学位",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.degree?a("el-button",{attrs:{type:"text"}},[t._v("学士")]):t._e(),2===e.row.degree?a("el-button",{attrs:{type:"text"}},[t._v("硕士")]):t._e(),3===e.row.degree?a("el-button",{attrs:{type:"text"}},[t._v("博士")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"name",label:"申报项目",width:"285"}}),a("el-table-column",{attrs:{prop:"phone",label:"联系电话",width:"180"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.distribution(e.row.id)}}},[t._v("分配")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.overDistribution(e.row.id)}}},[t._v("结束分配")]),a("el-dialog",{attrs:{title:"专家分配",visible:t.dialogVisible,width:"40%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData1,"tooltip-effect":"dark","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}},on:{"selection-change":t.handleSelectionChange,"select-all":t.all}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"专家简介"}},[a("span",[t._v(t._s(e.row.abstract))])]),a("el-form-item",{attrs:{label:"在评项目"}},[a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.row.experts_project))])],1)],1)]}}],null,!0)}),a("el-table-column",{attrs:{label:"姓名",width:"120",prop:"realname"}}),a("el-table-column",{attrs:{prop:"phone",label:"电话",width:"120"}}),a("el-table-column",{attrs:{prop:"experts_type",label:"专家类型","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.experts_type?a("el-button",{attrs:{type:"text"}},[t._v("教学综合改革类专家")]):t._e(),2===e.row.experts_type?a("el-button",{attrs:{type:"text"}},[t._v("专业建设类专家")]):t._e(),3===e.row.experts_type?a("el-button",{attrs:{type:"text"}},[t._v("人才培养改革类专家")]):t._e(),4===e.row.experts_type?a("el-button",{attrs:{type:"text"}},[t._v("实践教学类专家")]):t._e(),5===e.row.experts_type?a("el-button",{attrs:{type:"text"}},[t._v("创新创业类专家")]):t._e(),6===e.row.experts_type?a("el-button",{attrs:{type:"text"}},[t._v("教学管理类专家")]):t._e(),7===e.row.experts_type?a("el-button",{attrs:{type:"text"}},[t._v("师资队伍建设类专家")]):t._e(),8===e.row.experts_type?a("el-button",{attrs:{type:"text"}},[t._v("新工科研究与实践类专家")]):t._e()]}}],null,!0)})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.assign}},[t._v("分 配")])],1)],1)]}}])})],1),a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.size,"current-page":t.page,total:t.total},on:{"update:pageSize":function(e){t.size=e},"update:page-size":function(e){t.size=e},"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"size-change":t.sizeChange,"current-change":t.currentChange}})],1),a("el-tab-pane",{attrs:{label:"项目审核",name:"second"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData1,"row-class-name":t.tableRowClassName,"header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("span",[t._v(t._s(e.row.name))])]),a("el-form-item",{attrs:{label:"项目类别"}},[a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.row.type))])],1),a("el-form-item",{attrs:{label:"项目负责人"}},[a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.row.realname))])],1),a("el-form-item",{attrs:{label:"审核状态"}},[1===e.row.states?a("el-button",{attrs:{type:"text"}},[t._v("审核通过")]):t._e(),2===e.row.states?a("el-button",{attrs:{type:"text"}},[t._v("审核失败")]):t._e(),3===e.row.states?a("el-button",{attrs:{type:"text"}},[t._v("未审核")]):t._e(),4===e.row.states?a("el-button",{attrs:{type:"text"}},[t._v("审核中")]):t._e()],1),a("el-form-item",{attrs:{label:"项目成员"}},t._l(e.row.member,(function(e){return a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.realname)+"\n                                ")])})),1),a("el-form-item",{attrs:{label:"项目关键词"}},[a("span",[t._v(t._s(e.row.keywords))])]),a("el-form-item",{attrs:{label:"项目类型"}},[1===e.row.level?a("el-button",{attrs:{type:"text"}},[t._v("重点项目")]):t._e(),2===e.row.level?a("el-button",{attrs:{type:"text"}},[t._v("一般项目")]):t._e(),3===e.row.level?a("el-button",{attrs:{type:"text"}},[t._v("小额")]):t._e()],1),a("el-form-item",{attrs:{label:"项目描述"}},[a("span",[t._v(t._s(e.row.description))])]),a("el-form-item",{attrs:{label:"项目申请时间"}},[a("span",[t._v(t._s(e.row.time))])]),a("el-form-item",{attrs:{label:"项目在评专家"}},t._l(e.row.research_experts,(function(e){return a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.realname)+"\n                                ")])})),1),a("el-form-item",{attrs:{label:"项目评分"}},t._l(e.row.score,(function(e){return a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.name+":"+e.score)+"\n                                ")])})),1),a("el-form-item",{attrs:{label:"项目总评分"}},[a("el-button",{attrs:{type:"text"}},[t._v(t._s(t.TotalScore)+"\n                                ")])],1),a("el-form-item",{attrs:{label:"项目图片"}},t._l(e.row.thumb,(function(e){return a("span",[a("el-link",{attrs:{target:"_blank",href:e.url,underline:!1,download:e.name}},[a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.name))])],1),a("br")],1)})),0),a("el-form-item",{attrs:{label:"项目材料"}},t._l(e.row.file,(function(e){return a("span",[a("el-link",{attrs:{target:"_blank",href:e.url,underline:!1,download:e.name}},[a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.name))])],1),a("br")],1)})),0)],1)]}}])}),a("el-table-column",{attrs:{prop:"project_number",label:"项目编号",width:"200"}}),a("el-table-column",{attrs:{prop:"realname",label:"负责人姓名",width:"100"}}),a("el-table-column",{attrs:{prop:"college",label:"所属学院",width:"160"}}),a("el-table-column",{attrs:{prop:"teachers_title",label:"职称",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.teachers_title?a("el-button",{attrs:{type:"text"}},[t._v("助教")]):t._e(),2===e.row.teachers_title?a("el-button",{attrs:{type:"text"}},[t._v("讲师")]):t._e(),3===e.row.teachers_title?a("el-button",{attrs:{type:"text"}},[t._v("副教授")]):t._e(),4===e.row.teachers_title?a("el-button",{attrs:{type:"text"}},[t._v("教授")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"degree",label:"学位",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.degree?a("el-button",{attrs:{type:"text"}},[t._v("学士")]):t._e(),2===e.row.degree?a("el-button",{attrs:{type:"text"}},[t._v("硕士")]):t._e(),3===e.row.degree?a("el-button",{attrs:{type:"text"}},[t._v("博士")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"name",label:"申报项目",width:"285"}}),a("el-table-column",{attrs:{prop:"phone",label:"联系电话",width:"180"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.audit(e.row.id)}}},[t._v("审核")]),a("el-dialog",{attrs:{title:"项目审核",visible:t.dialogVisible1,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("审核通过")]),a("el-radio",{attrs:{label:"2"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("审核失败")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible1=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.confirm(e.row.id)}}},[t._v("确 定")])],1)],1)]}}])})],1),a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.size1,"current-page":t.page1,total:t.total1},on:{"update:pageSize":function(e){t.size1=e},"update:page-size":function(e){t.size1=e},"update:currentPage":function(e){t.page1=e},"update:current-page":function(e){t.page1=e},"size-change":t.sizeChange1,"current-change":t.currentChange1}})],1)],1)],1)},l=[],o=(a("c5f6"),a("ac6a"),{name:"LeaderManage",data:function(){return{activeName:"first",tableData:[],size:10,page:1,total:0,size1:10,page1:1,total1:0,message:"",update_number:0,searchData:"",select:"",value1:"",value2:"",show:!1,dialogVisible:!1,dialogVisible1:!1,tableData1:[],multipleSelection:[],pid:"",radio:"",TotalScore:""}},methods:{getData:function(){var t=this;this.$axios.get(this.$api.PROJECT,{size:this.size,page:this.page,size1:this.size1,page1:this.page1,username:sessionStorage.getItem("username"),require:"personal"}).then((function(e){if(200===e.data.code){e.data.data.forEach((function(t,e){t.member&&(t.member=JSON.parse(t.member)),t.research_experts&&(t.research_experts=JSON.parse(t.research_experts)),t.score&&(t.score=JSON.parse(t.score)),t.file&&(t.file=JSON.parse(t.file)),t.thumb&&(t.thumb=JSON.parse(t.thumb))}));var a=t;e.data.data1.forEach((function(t,e){if(t.member&&(t.member=JSON.parse(t.member)),t.research_experts&&(t.research_experts=JSON.parse(t.research_experts)),t.score){t.score=JSON.parse(t.score);var r=0;t.score.forEach((function(t,e){r+=Number(t.score)})),a.TotalScore=r/t.score.length}t.file&&(t.file=JSON.parse(t.file)),t.thumb&&(t.thumb=JSON.parse(t.thumb))})),t.tableData=e.data.data,t.total=e.data.total,t.tableData1=e.data.data1,t.total1=e.data.total1}else t.$message.error(e.data.msg)}))},sizeChange:function(t){console.log(t),this.page=t,this.getData()},currentChange:function(t){this.page=t,this.getData()},sizeChange1:function(t){console.log(t),this.page1=t},currentChange1:function(t){this.page1=t},handleClick:function(t,e){console.log(t,e)},tableRowClassName:function(t){t.row;var e=t.rowIndex;return 1===e?"warning-row":3===e?"success-row":""},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},toggleSelection:function(t){var e=this;t?t.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.multipleSelection=t},distribution:function(t){var e=this;this.pid=t,this.dialogVisible=!0,this.$axios.get(this.$api.getexpersData,{username:sessionStorage.getItem("username"),pid:this.pid}).then((function(t){200===t.data.code?e.tableData1=t.data.data:e.$message.error("暂无专家信息。")}))},assign:function(){for(var t=this,e=[],a={},r=0;r<this.multipleSelection.length;r++)a.id=this.multipleSelection[r].id,a.realname=this.multipleSelection[r].realname,e[r]=a,a={};for(var l=[],o=0;o<this.multipleSelection.length;o++)l.push(this.multipleSelection[o].id);this.$confirm("是否选择这些专家进行评分?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.put(t.$api.PROJECT,{grade:"grade",pid:t.pid,research_experts:JSON.stringify(e)}).then((function(e){200===e.data.code?(t.$message.success(e.data.msg),t.$axios.put(t.$api.updateExpertsProject,{expertsProjectMsg:JSON.stringify(l),pid:t.pid}).then((function(e){200===e.data.code?(t.getData(),t.$message.success(e.data.msg)):t.$message.error(e.data.msg)}))):t.$message.error(e.data.msg)})),t.dialogVisible=!1})).catch((function(){t.$message({type:"info",message:"已取消选择"})})),this.dialogVisible=!1},all:function(t){this.multipleSelection=t},overDistribution:function(t){var e=this;this.$confirm("是否选择结束对该项目的专家分配?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.put(e.$api.PROJECT,{overDistribution:"overDistribution",pid:t}).then((function(t){200===t.data.code?(e.$message.success(t.data.msg),e.getData()):e.$message.error(t.data.msg)}))})).catch((function(){e.$message({type:"info",message:"已取消选择"})}))},audit:function(){this.dialogVisible1=!0},confirm:function(t){var e=this;this.$confirm("是否选择该审核结果?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=[],r={};r.id=t,r.name=name,a.push(r),a=JSON.stringify(a),e.$axios.put(e.$api.PROJECT,{state:e.radio,id:t,psh:a}).then((function(t){200===t.data.code?(e.$message.success(t.data.msg),e.dialogVisible=!1,e.getData()):(e.$message.error(t.data.msg),e.dialogVisible=!1)})),e.dialogVisible=!1})).catch((function(){e.$message({type:"info",message:"已取消选择"})})),this.dialogVisible=!1}},mounted:function(){this.getData()}}),n=o,s=(a("899c"),a("2877")),i=Object(s["a"])(n,r,l,!1,null,"b5c51f3c",null);e["default"]=i.exports},"899c":function(t,e,a){"use strict";var r=a("9f36"),l=a.n(r);l.a},"8b97":function(t,e,a){var r=a("d3f4"),l=a("cb7c"),o=function(t,e){if(l(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(l){e=!0}return function(t,a){return o(t,a),e?t.__proto__=a:r(t,a),t}}({},!1):void 0),check:o}},9093:function(t,e,a){var r=a("ce10"),l=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,l)}},"9f36":function(t,e,a){},aa77:function(t,e,a){var r=a("5ca1"),l=a("be13"),o=a("79e5"),n=a("fdef"),s="["+n+"]",i="​",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),p=function(t,e,a){var l={},s=o((function(){return!!n[t]()||i[t]()!=i})),c=l[t]=s?e(f):n[t];a&&(l[a]=c),r(r.P+r.F*s,"String",l)},f=p.trim=function(t,e){return t=String(l(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=p},c5f6:function(t,e,a){"use strict";var r=a("7726"),l=a("69a8"),o=a("2d95"),n=a("5dbc"),s=a("6a99"),i=a("79e5"),c=a("9093").f,u=a("11e9").f,p=a("86cc").f,f=a("aa77").trim,b="Number",d=r[b],m=d,_=d.prototype,h=o(a("2aeb")(_))==b,g="trim"in String.prototype,v=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():f(e,3);var a,r,l,o=e.charCodeAt(0);if(43===o||45===o){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,l=49;break;case 79:case 111:r=8,l=55;break;default:return+e}for(var n,i=e.slice(2),c=0,u=i.length;c<u;c++)if(n=i.charCodeAt(c),n<48||n>l)return NaN;return parseInt(i,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof d&&(h?i((function(){_.valueOf.call(a)})):o(a)!=b)?n(new m(v(e)),a,d):v(e)};for(var y,w=a("9e1e")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)l(m,y=w[x])&&!l(d,y)&&p(d,y,u(m,y));d.prototype=_,_.constructor=d,a("2aba")(r,b,d)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-21343e3d.b2c6aba1.js.map