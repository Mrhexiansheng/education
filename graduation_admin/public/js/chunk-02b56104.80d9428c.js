(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02b56104"],{6762:function(e,t,a){"use strict";var l=a("5ca1"),r=a("c366")(!0);l(l.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},"7c80":function(e,t,a){},"7f87":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:"/",width:"100%"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("管理员管理")]),a("el-breadcrumb-item",[e._v("资讯管理")])],1),a("el-divider"),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"会议信息",name:"first"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}},on:{"cell-dblclick":e.tableDbEdit}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"资讯描述"}},[a("span",[e._v(e._s(t.row.description))])]),a("el-form-item",{attrs:{label:"资讯申请时间"}},[a("span",[e._v(e._s(t.row.time))])]),a("el-form-item",{attrs:{label:"资讯图片"}},e._l(t.row.thumb,(function(t){return a("span",[a("el-link",{attrs:{target:"_blank",href:t.url,underline:!1,download:t.name}},[a("el-button",{attrs:{type:"text"}},[e._v(e._s(t.name))])],1),a("br")],1)})),0),a("el-form-item",{attrs:{label:"资讯材料"}},e._l(t.row.file,(function(t){return a("span",[a("el-link",{attrs:{target:"_blank",href:t.url,underline:!1,download:t.name}},[a("el-button",{attrs:{type:"text"}},[e._v(e._s(t.name))])],1),a("br")],1)})),0)],1)]}}])}),a("el-table-column",{attrs:{prop:"id",label:"id",width:"180"}}),a("el-table-column",{attrs:{prop:"title",label:"会议名称",width:"180"}}),a("el-table-column",{attrs:{prop:"abroad",label:"会议类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.abroad?a("el-button",{attrs:{type:"text"}},[e._v("校级")]):e._e(),2===t.row.abroad?a("el-button",{attrs:{type:"text"}},[e._v("院级")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"college",label:"所属学院",width:"180"}}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.del(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"会议信息添加",name:"second"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-width":"120px","hide-required-asterisk":!0,"status-icon":!0}},[a("el-form-item",{attrs:{label:"会议名称",prop:"title"}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"会议类别",prop:"abroad"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.abroad,callback:function(t){e.$set(e.form,"abroad",t)},expression:"form.abroad"}},[e._v("校级")]),a("el-radio",{attrs:{label:"2"},model:{value:e.form.abroad,callback:function(t){e.$set(e.form,"abroad",t)},expression:"form.abroad"}},[e._v("院级")])],1),2==e.form.abroad?a("el-form-item",{attrs:{label:"所属学院",prop:"college"}},[a("el-select",{attrs:{placeholder:"请选择所属学院"},model:{value:e.form.college,callback:function(t){e.$set(e.form,"college",t)},expression:"form.college"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.college,value:e.id}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"信息简介",prop:"description"}},[a("el-input",{attrs:{placeholder:"请输入资讯简介",type:"textarea",rows:2},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("el-form-item",{attrs:{label:"信息内容",prop:"content"}},[a("el-input",{attrs:{placeholder:"请输入资讯简介",type:"textarea",rows:2},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),a("el-form-item",{attrs:{label:"信息图片",prop:"thumb"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.upload,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess1,"before-upload":e.beforePhoneUpload,"file-list":e.form.thumb,"list-type":"picture"}},[a("el-button",[e._v("点击上传(可选择上传)")])],1)],1),a("el-form-item",{attrs:{label:"信息附属文件",prop:"file"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadFile,"on-remove":e.handleRemove1,"before-upload":e.beforeFileUpload,"on-success":e.handleFileSuccess,"file-list":e.form.file}},[a("el-button",[e._v("点击上传(可选择上传)")])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加")]),a("el-button",{on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1)],1)],1)],1)],1)},r=[],o=(a("6762"),a("7f7f"),a("ac6a"),{name:"MeetingManage",data:function(){return{options:[],activeName:"first",uploadFile:this.$api.UPLOADFILE,upload:this.$api.UPLOAD,form:{title:"",file:[],thumb:[],description:"",content:"",time:(new Date).toLocaleString(),college:""},value:"",rules:{title:[{required:!0,message:"请输入资讯标题",trigger:"blur"}],content:[{required:!0,message:"请输入资讯内容",trigger:"blur"}],description:[{required:!0,message:"请输入资讯简介",trigger:"blur"}]},tableData:[]}},methods:{getData:function(){var e=this;this.$axios.get(this.$api.MEETING,{type:"ht"}).then((function(t){200===t.data.code?(t.data.data.forEach((function(e,t){e.file&&(e.file=JSON.parse(e.file)),e.thumb&&(e.thumb=JSON.parse(e.thumb))})),e.tableData=t.data.data):e.$message.error(t.data.msg)}))},handleRemove1:function(e){for(var t=0;t<this.form.file.length;t++)e.name===this.form.file[t].name&&this.form.file.splice(t,t+1)},handleRemove:function(e){for(var t=0;t<this.form.thumb.length;t++)e.name===this.form.thumb[t].name&&this.form.thumb.splice(t,t+1)},beforePhoneUpload:function(e){var t=["image/jpeg","image/jpg","image/png"],a=e.size/1024/1024<2;return t.includes(e.type)?a?void 0:(this.$message.error("上传头像图片大小不能超过 2MB!"),!1):(this.$message.error("上传的图片格式有误，请重新上传！"),!1)},beforeFileUpload:function(e){var t=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip"],a=e.size/1024/1024<5;return t.includes(e.type)?a?void 0:(this.$message.error("上传文件大小不能超过 5MB!"),!1):(this.$message.error("上传的文件格式有误，请重新上传！"),!1)},handleFileSuccess:function(e,t){if("error"===e)this.$message.error("上传失败");else{var a=t.name.lastIndexOf("."),l={};l.name=t.name.slice(0,a),l.url=e,this.form.file.push(l)}},handleAvatarSuccess1:function(e,t){if("error"===e)this.$message.error("上传失败");else{var a=t.name.lastIndexOf("."),l={};l.name=t.name.slice(0,a),l.url=e,this.form.thumb.push(l)}},handleClick:function(e,t){},reset:function(){this.$refs.ruleForm.resetFields(),this.form.abroads=""},add:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.$confirm("是否选择添加该资讯?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.form.file&&(e.form.file=JSON.stringify(e.form.file)),e.form.thumb&&(e.form.thumb=JSON.stringify(e.form.thumb)),e.$axios.post(e.$api.MEETING,e.form).then((function(t){200===t.data.code?(e.$message.success(t.data.msg),e.reset(),e.getData()):(e.$message.error(t.data.msg),e.reset(),e.getData())}))})).catch((function(){e.$message({type:"info",message:"已取消添加"})}))}))},tableDbEdit:function(e,t,a,l){if("id"!=t.label&&"title"==t.property){l.target.innerHTML="";var r=document.createElement("input");r.setAttribute("type","text"),r.value=e.title,r.style.width="80%",r.style.height="80%",a.appendChild(r);var o=this;r.onblur=function(){a.removeChild(r),r.value!=e.title?(l.target.innerHTML=r.value,e.title=r.value,o.$axios.put(o.$api.MEETING,{type:"title",title:e.title,id:e.id}).then((function(e){200===e.data.code?(o.getData(),o.$message.success(e.data.msg)):o.$message.error(e.data.msg)}))):l.target.innerHTML=e.title}}},getCollege:function(){var e=this;this.$axios.get(this.$api.COLLEGE).then((function(t){200===t.data.code&&(e.options=t.data.data)}))},del:function(e){var t=this;this.$confirm("是否选择删除该信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.delete(t.$api.MEETING,{id:e}).then((function(e){200===e.data.code?(t.$message.success(e.data.msg),t.getData()):(t.$message.error(e.data.msg),t.getData())}))})).catch((function(){t.$message({type:"info",message:"已取消添加"})}))}},mounted:function(){this.getCollege(),this.getData()}}),i=o,n=(a("d683"),a("2877")),s=Object(n["a"])(i,l,r,!1,null,"30f11836",null);t["default"]=s.exports},d683:function(e,t,a){"use strict";var l=a("7c80"),r=a.n(l);r.a}}]);
//# sourceMappingURL=chunk-02b56104.80d9428c.js.map